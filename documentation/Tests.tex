\chapter{Tests}

Though optional, part of the code is covered with unit tests and integration test.\\
The purpose of the tests are in one hand to ensure while developong that the coded funtions yields what is intended, and in the other hand ensure that future developments will not break what is already developed.

\section{Installation} % (fold)
\label{sec:installation}

Tests are launched using \lstinline{pytest} but any other framework can be used as long as test are rewritten to fit the grammar.
In case, \lstinline{pytest} wasn't installed with the requirements.txt file at the beginning, to install \lstinline{pytest}:

\begin{lstlisting}[language=bash]
  $ pip install pytest
\end{lstlisting}
% section installation (end)

\subsection{Tree folder overview} % (fold)
\label{sec:tree_folder_overview}

\begin{forest}
    for tree={font=\sffamily, %grow'=0,
    folder indent=.9em, folder icons,
    edge=densely dotted}
    [IMACLIM_Country
        [(...)]
        [tests
            [mock_data
                [activities_mapping_part.csv, is file]
                [categories_coordinates_mapping.csv, is file]
                [(...).py, is file]]
            [test_Aggregation.py, is file]
            [test_Dashboard.py, is file]
            [test_(...).py, is file]]
    ]
\end{forest}
% section tree_folder_overview (end)

\section{Running tests} % (fold)
\label{sec:running_tests}


To run the whole series of tests, ensure that you are at the root of IMACLIM-Country and simply run

\begin{lstlisting}[language=bash]
  $ pytest
\end{lstlisting}

\lstinline{pytest} will automatically browse through the file tree to find the tests file and run them.\\
For more details about the test run, it is possible to ask for a more verbose mode by using the option:

\begin{lstlisting}[language=bash]
  $ pytest -vv
\end{lstlisting}

If you want to run a specific set of tests, you can target the file by running:

\begin{lstlisting}[language=bash]
  $ pytest tests/test_the_file_you_want_to_test.py
\end{lstlisting}
% section running_tests (end)
